var cErrorColor = "#FF4040";
var cRegularColor ="#000000";
var cDangColor = "#a5d254"


function isPosNum(object){
	
	 var def = arguments[1] ? arguments[1] : 1.0;	
	 var min = arguments[2] ? arguments[2] : 0.0;	
	 var max = arguments[3] ? arguments[3] : Infinity;	
	 var defNul = arguments[4] ? arguments[4] : 0;	
	 
	 //var unit = $("#"+$(object).attr("id")+"Unit").text();
	 
	 var unit = $("span[id^="+$(object).attr("id")+"Unit"+"]").text();
	 
	 var inVal = parseFloat(object.value);

	if(defNul==-1){
		if(inVal == object.value && (inVal<min || inVal>max)){
			 alert(langDict["errNumBtw"]+min+langDict["errNumBtw0"]+max+langDict["errNumBtw1"]);
			 object.value =(def.toFixed(3)*1000-0)/1000;
			 object.style.color = cErrorColor;			 
		}
		if(object.value==""){
			alert(langDict["errNoNum"]);
			object.value =(def.toFixed(3)*1000-0)/1000;
			object.style.color = cErrorColor;		
		}
		
		return true;
	}


   if ( inVal == object.value && inVal>min && inVal<=max) {
      object.style.color = cRegularColor;
      if(inVal<def/10.0 && 0==min.toFixed(2)){
      	var unitWar = langDict["tipAttUnit"] + unit + ".";
      	if(unit==""||unit==null){
      		unitWar="";
      	}      	
      	object.style.color = cDangColor;
      	if(inVal<def/100.0){
      		alert(langDict["errValTooSmall"]+"\n"+unitWar);
		      if(defNul){
			   		 object.value ="";
			    }else{
		 		     object.value =(def.toFixed(3)*1000-0)/1000;	    	
			    }
      		object.style.color = cErrorColor;
      		return false;
      	}else{
      		alert(langDict["warValTooSmall"]+unitWar);
      	}      	      	
      }
      return true;
   } else {
      if(defNul&&object.value==""){
      	return;
      }
      
      object.style.color = cErrorColor;
      if(inVal != object.value){
      	alert(langDict["errNoNum"]);
      }else if(parseFloat(object.value)<=min){
      	if(0==min){
      		alert(langDict["errPosiNum"]);   
      	}else{
      		alert(langDict["errNumBigTh"] + min.toFixed(2));
      	}
      	   	
      }else{
      	alert(langDict["errNumSmalTh"] + max.toFixed(2)+"\n" +langDict["tipAttUnit"] + unit +" .");
      }
      if(defNul){
	   		 object.value ="";
	    }else{
 		     object.value =(def.toFixed(3)*1000-0)/1000;	    	
	    }

      return false;
   }
}
