function ClearRes(){

		$("#outShareBar").val("");
		CalShareShow();
		$("#outShareBar").html("");
		$("#outShareBar").share();		
	
		$("#outHovTime").html("-");
		$("#outHovThrPerc").html("-");
		$("#outHovMotCur").html("-");
		$("#outHovMotRPM").html("-");
		$("#outHovMotPwr").html("-");
		$("#outHovBattVol").html("-");
		$("#outHovBattCur").html("-");
		$("#outHovEff").html("-");

		
		$("#outMaxTime").html("-");
		$("#outMaxLift").html("-");
		$("#outMaxMotCur").html("-");
		$("#outMaxMotRPM").html("-");
		$("#outMaxMotPwr").html("-");
		$("#outMaxBattVol").html("-");
		$("#outMaxBattCur").html("-");
		$("#outMaxEff").html("-");		


		$("#outTotWeight").html("-");
		$("#outTotGenFly").html("-");
		$("#outTotRemLoad").html("-");
		$("#outTotMaxAlt").html("-");
		$("#outTotMaxTilt").html("-");
		$("#outTotMaxSpeed").html("-");
		$("#outTotMaxRang").html("-");		
		//$("#outTotMaxClimbAc").html("-");
		$("#outTotWindResi").html("-");

		$("#outHoverTime").html("-");
		$("#outHoverTimePer").html("-");
		$("#outLoadWeight").html("-");
		$("#outLoadWeightPer").html("-");
		$("#outFlyAlt").html("-");
		$("#outFlyAltPer").html("-");
		$("#outFlyRange").html("-");
		$("#outFlyRangePer").html("-");
		$("#outForSpeed").html("-");
		$("#outForSpeedPer").html("-");

		$("#outTotMass").html("-");
		$("#outG").html("-");
		$("#outInMatJxx").html("-");
		$("#outInMatJyy").html("-");
		$("#outInMatJzz").html("-");				
		$("#outdMc").html("-");
		$("#outCt").html("-");
		$("#outCm").html("-");
		$("#outCR").html("-");
		$("#outWb").html("-");
		$("#outJm").html("-");
		$("#outTm").html("-");
		$("#outCd").html("-");
		
		$("#outHoverTimeBar").css("width",Math.round(2*5)+"px");
		$("#outLoadWeightBar").css("width",Math.round(2*5)+"px");
		$("#outFlyAltBar").css("width",Math.round(2*5)+"px");
		$("#outFlyRangeBar").css("width",Math.round(2*5)+"px");
		$("#outForSpeedBar").css("width",Math.round(2*5)+"px");
		
		$(".progress-bar").css("animationName","IOS7A");	
		$("#outInfoFbBtn").css("display","none");	
}


function CalcRes(){
	

//for(var i=0;i<UAVData.length;i++){
//	my_data=UAVData[i][2]
//	$.ajax({ //一个Ajax过程 
//		type: "get", //以post方式与后台沟通 
//		url : "php/CalcReqData.php", //与此php页面沟通 
//		data: {key:my_data}, //发给php的数据有两项，分别是上面传来的u和p 
//		error: function(){  
//		   alert('Error!');  
//		}
//		}); 	
//	
//}

	
	var str="";
	str=str+$("#inFrameShTitle").children("span[class='value']").html()+",";
	str=str+$("#inTWeightOp").val()+",";
	str=str+$("#inTWeight").val()+",";
	str=str+$("#inFrLen").val()+",";
	str=str+$("#inAlt").val()+",";
	str=str+$("#inTemp").val()+",";
	str=str+$("#inShapAero").val()+";";
			
	str=str+$("#inTBatRanCuSel").val()+",";
	str=str+$("#inSafePow").val()+",";	
	str=str+$("#inMaxTilt").val()+",";	
	str=str+$("#inAddCur").val()+";";	
	
		
	var MotorIndex = parseInt($("#inMotorBrand").val());	
		
	if(MotorIndex==-1 && $("#inMotAdvTr").css("display")=="none"){
		alert(langDict["errMotParaMiss"]);
		$("#inMotorBlock").css("border","1px dashed #f40");
		$("#inPropBlock").css("border","");
		$("#inESCBlock").css("border","");
		$("#inBattBlock").css("border","");			
		return;		
	}else{
		$("#inMotorBlock").css("border","");		
	}
	
	if(MotorIndex==-1){
		str=str+""+","+""+",";
		str=str+$("#inMotorKv").val()+",";
		str=str+$("#inNoLoCur").val()+",";
		str=str+$("#inNoLoVo").val()+",";
		str=str+$("#inMotorLimitCur").val()+",";
		str=str+$("#inMotorLimitCurType option:selected").html()+",";
		str=str+$("#inMotorR").val()+",";
		str=str+$("#inChoOutLen").val()+",";
		str=str+$("#inMotorWeight").val()+";";
	}else{
		str=str+Motor[MotorIndex][0]+",";	
		str=str+$("#inMotorType option:selected").html()+",";	
		str=str+",,,,,,,;";
	}
	
	
	var PropIndex = parseInt($("#inPropBrand").val());
	if(PropIndex==-1 && $("#inPropAdvTr").css("display")=="none"){
		alert(langDict["errPropParaMiss"]);
		$("#inPropBlock").css("border","1px dashed #f40");
		$("#inESCBlock").css("border","");
		$("#inBattBlock").css("border","");		
		return;		
	}else{
		$("#inPropBlock").css("border","");		
	}
	
	if(PropIndex==-1){
		str=str+""+","+""+",";
		str=str+$("#inPropDia").val()+",";
		str=str+$("#inPropPitch").val()+",";
		str=str+$("#inPropblade option:selected").html()+",";	
		str=str+$("#inPropWeight").val()+";";						
	}else{
		str=str+Propeller[PropIndex][0]+",";	
		str=str+$("#inPropType option:selected").html()+",";	
		str=str+",,,;";
	}	
	

	var ESCIndex = parseInt($("#inESCBrand").val());
	if(ESCIndex==-1 && $("#inESCAdvTr").css("display")=="none"){
		alert(langDict["errESCParaMiss"]);
		$("#inESCBlock").css("border","1px dashed #f40");
		$("#inBattBlock").css("border","");		
		return;		
	}else{
		$("#inESCBlock").css("border","");		
	}
	
	if(ESCIndex==-1){
		str=str+","+""+",";
		str=str+$("#inESCContI").val()+",";
		str=str+$("#inESCMaxV option:selected").html()+",";		
		str=str+$("#inESCR").val()+",";
		str=str+$("#inESCWeight").val()+";";				
	}else{
		str=str+ESC[ESCIndex][0]+",";	
		str=str+$("#inESCType option:selected").html()+",";	
		str=str+",,,;";
	}	
		
	
	var BattIndex = parseInt($("#inBattBrand").val());
	if(BattIndex==-1 && $("#inBattAdvTr").css("display")=="none"){
		alert(langDict["errBattParaMiss"]);
		$("#inBattBlock").css("border","1px dashed #f40");	
		return;		
	}else{
		$("#inBattBlock").css("border","");		
	}
	
	if(BattIndex==-1){
		str=str+",,,,";
		str=str+$("#inBattType1 option:selected").html()+",";
		str=str+$("#inBattSeries").val()+",";
		str=str+"1,";
		str=str+$("#inBattCapa").val()+",";
		str=str+$("#inBattCur").val()+",";
		str=str+$("#inBattRe").val()+",";
		str=str+$("#inBattWeight").val()+"";
	}else if(BattIndex==0){
		str=str+Battery[BattIndex][0]+",";	
		str=str+$("#inBattType option:selected").html()+",";
		str=str+$("#inBattComSNum").val()+",";	
		str=str+$("#inBattComParal").val()+",";	
		str=str+",,,,,,";
		
	}else{
		str=str+Battery[BattIndex][0]+",";	
		str=str+$("#inBattType option:selected").html()+",";		
		str=str+$("#inBattSNum").val()+",";	
		str=str+$("#inBattPNum").val()+",";	
		str=str+",,,,,,";
	}

	//$("#outStrShow").html(str);	
	strAjaxSend=str;
	
	var my_data=str;
	
		$("#outHoverTimeBar").css("width",Math.round(2*5)+"px");
		$("#outLoadWeightBar").css("width",Math.round(2*5)+"px");
		$("#outFlyAltBar").css("width",Math.round(2*5)+"px");
		$("#outFlyRangeBar").css("width",Math.round(2*5)+"px");
		$("#outForSpeedBar").css("width",Math.round(2*5)+"px");
		
		$(".progress-bar").css("animationName","IOS7A");	
		$("#outInfoFbBtn").css("display","none");		
	$("#inCalcButton").attr("disabled","true");
	$.ajax({ //一个Ajax过程 
	type: "get", //以post方式与后台沟通 
	url : "php/CalcReqData.php", //与此php页面沟通 
	data: {key:my_data}, //发给php的数据有两项，分别是上面传来的u和p 
	error: function(){  
	   alert('Error!');  
	},  
	success: function(data,status){//如果调用php成功 
		$("#inCalcButton").removeAttr("disabled");
		//$("#txtHint").html(unescape(data));
		var resp = data;
		strAjaxReceived=data;
		//$("#outStrShow").html($("#outStrShow").html()+"<br>"+resp);
		//return;
		//$("#outStrShow").html(resp);
		//$("#outStrShow").html($("#outStrShow").html()+"<br>"+resp);	
		$("#outStrShow").html("");
		$("#outStrShow").val("");
		$("#inTWeightTD").css("color","#000");
		$("#inTWeight").css("color","#000");
		$("#inFrLen").css("color","#000");
		$("#inFrLenTD").css("color","#000");
		$("#outHovThrPercText").css("color","#000");
		$("#outHovEffText").css("color","#000");
		$("#inAltTD").css("color","#000");
		$("#inAlt").css("color","#000");		
					
		resps = resp.split(";");
	//$("#outStrShow1").html($("#outStrShow1").html()+"<br>"+resp);		
		//$("#outStrShow1").html($("#outStrShow1").html()+"<br>"+resp);
		
		var errCd = resps[1];		
		if(!(errCd==""||errCd==null)){
			ClearRes();
			$("#outStrShow").val("0,"+errCd);
			if(errCd=="1"){
				if($("#inBattSNum").val()=="1"){
					$("#inMotorBlock").css("border","1px dashed #f40");						
				}else{
					$("#inMotorBlock").css("border","1px dashed #f40");	
					$("#inBattBlock").css("border","1px dashed #f40");
				}															
			}else if(errCd=="2"){
				$("#inESCBlock").css("border","1px dashed #f40");				
			} else if(errCd=="3"){
				$("#inBattBlock").css("border","1px dashed #f40");	
			} else if(errCd=="4"){
				$("#inTWeightTD").css("color","#f00");
				$("#inTWeight").css("color","#f00");
			} else if(errCd=="5"){
				$("#inFrLen").css("color","#f00");
				$("#inFrLenTD").css("color","#f00");				
				$("#inPropBlock").css("border","1px dashed #f40");
			}else if(errCd=="6"){
				$("#inAltTD").css("color","#f00");
				$("#inAlt").css("color","#f00");				
			}else if(errCd=="9"){
				$("#inESCBlock").css("border","1px dashed #f40");
				$("#inBattBlock").css("border","1px dashed #f40");
			}
			
			CalErrShow();
			return;
		}

		var wrnCd = resps[2];
		if(!(wrnCd==""||wrnCd==null)){
			$("#outStrShow").val("30,"+wrnCd);
			var wrnCds=wrnCd.split(",");
			for(var i=0;i<wrnCds.length;i++){
				if(wrnCds[i]=="31"){
					$("#outHovThrPercText").css("color","#f00");
				}
				if(wrnCds[i]=="32"){
					$("#outHovEffText").css("color","#f00");
				}								
			}			
		}
		CalErrShow();
		if(resps.length<8){	
			ClearRes();
			$("#outStrShow").html(resp+"<br>SERVER ERROR!");
			return;
		}		
		var HovPerf = resps[3].split(",");
		var MaxPerf = resps[4].split(",");
		var TotPerf = resps[5].split(",");
		var BasBar = resps[6].split(",");
		var MathModel = resps[7].split(",");
		if(HovPerf.length!=8||MaxPerf.length!=8||TotPerf.length!=8||BasBar.length!=10||MathModel.length!=14){
			ClearRes();
			$("#outStrShow").html("SERVER DATA TRANSMISSION ERROR!");
			return;
		}
		
		$("#outShareBar").val(HovPerf[0]+","+HovPerf[1]);
		CalShareShow();
		$("#outShareBar").html("");
		$("#outShareBar").share();	
		
		//$("#outStrShow").html(TotPerf[7]);
		$("#outHovTime").html(HovPerf[0]);
		$("#outHovThrPerc").html(HovPerf[1]);
		$("#outHovMotCur").html(HovPerf[2]);
		$("#outHovMotRPM").html(HovPerf[3]);
		$("#outHovMotPwr").html(HovPerf[4]);
		$("#outHovBattVol").html(HovPerf[5]);
		$("#outHovBattCur").html(HovPerf[6]);
		$("#outHovEff").html(HovPerf[7]);

		
		$("#outMaxTime").html(MaxPerf[0]);
		$("#outMaxLift").html(MaxPerf[1]);
		$("#outMaxMotCur").html(MaxPerf[2]);
		$("#outMaxMotRPM").html(MaxPerf[3]);
		$("#outMaxMotPwr").html(MaxPerf[4]);
		$("#outMaxBattVol").html(MaxPerf[5]);
		$("#outMaxBattCur").html(MaxPerf[6]);
		$("#outMaxEff").html(MaxPerf[7]);		
		
		$("#outTotGenFly").html(TotPerf[0]);
		$("#outTotWeight").html(TotPerf[1]);
		$("#outTotRemLoad").html(TotPerf[2]);
		$("#outTotMaxAlt").html(TotPerf[3]);
		$("#outTotMaxTilt").html(TotPerf[4]);
		$("#outTotMaxSpeed").html(TotPerf[5]);
		$("#outTotMaxRang").html(TotPerf[6]);		
//		$("#outTotMaxClimbAc").html(TotPerf[6]);
		$("#outTotWindResi").html(TotPerf[7]);


		$("#outHoverTime").html(BasBar[0]);
		$("#outHoverTimePer").html(BasBar[1]);
		$("#outLoadWeight").html(BasBar[2]);
		$("#outLoadWeightPer").html(BasBar[3]);
		$("#outFlyAlt").html(BasBar[4]);
		$("#outFlyAltPer").html(BasBar[5]);
		$("#outFlyRange").html(BasBar[6]);
		$("#outFlyRangePer").html(BasBar[7]);
		$("#outForSpeed").html(BasBar[8]);
		$("#outForSpeedPer").html(BasBar[9]);

		$("#outTotMass").html(MathModel[0]);
		$("#outG").html(MathModel[1]);
		$("#outInMatJxx").html(MathModel[2]);
		$("#outInMatJyy").html(MathModel[3]);
		$("#outInMatJzz").html(MathModel[4]);	
		$("#outdMc").html(MathModel[5]);
		$("#outCt").html(MathModel[6]);
		$("#outCm").html(MathModel[7]);
		$("#outCR").html(MathModel[8]);
		$("#outWb").html(MathModel[9]);
		$("#outJm").html(MathModel[10]);
		$("#outTm").html(MathModel[11]);
		$("#outCd").html(MathModel[12]);
		$("#outCMd").html(MathModel[13]);
				
		$("#outHoverTimeBar").css("width",Math.round(parseFloat(BasBar[1])*5)+"px");
		$("#outLoadWeightBar").css("width",Math.round(parseFloat(BasBar[3])*5)+"px");
		$("#outFlyAltBar").css("width",Math.round(parseFloat(BasBar[5])*5)+"px");
		$("#outFlyRangeBar").css("width",Math.round(parseFloat(BasBar[7])*5)+"px");
		$("#outForSpeedBar").css("width",Math.round(parseFloat(BasBar[9])*5)+"px");								
				
		$(".progress-bar").css("animationName","IOS7B");
		
		$("#outInfoFbBtn").css("display","");
		strAjaxCalcData=$("#outHoverTime").	html()+","+$("#outHovThrPerc").html()+","+$("#outTotMass").html()+","+$("#outTotMaxSpeed").html()+","+$("#outTotMaxRang").html();
		
	} 
	}); 
	
}
